<!DOCTYPE html><html class="appearance-auto" lang="zh-CN"><head><meta charset="UTF-8"><title>Spring Bootäº‹åŠ¡å›æ»š</title><meta name="description" content="May the Force be with you"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="å‰è¨€æˆ‘ä»¬å¼€å‘ç³»ç»Ÿçš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°ä¸€äº›å…³äºäº¤æ˜“çš„éœ€æ±‚ï¼Œäº¤æ˜“çš„è¿‡ç¨‹å¤§å¤šæ•°éƒ½æ¯”è¾ƒç¹çï¼ˆä¼šåŒ…æ‹¬ä¿®æ”¹åº“å­˜ã€ä¿®æ”¹ä½™é¢ã€è®°å½•äº¤æ˜“è´¦å•ç­‰ç­‰æ­¥éª¤ï¼‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å…¶ä¸­çš„æ½œåœ¨é£é™©äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨äº¤æ˜“çš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†åº“å­˜ï¼ˆåº“å­˜ -1ï¼‰ï¼Œæ¥ä¸‹æ¥éœ€è¦è¿›è¡Œæ”¯ä»˜æ“ä½œï¼Œä½†æ˜¯æ­¤æ—¶ç³»ç»Ÿçªç„¶å®•æœºæˆ–è€…ç½‘ç»œçªç„¶ä¸­æ–­ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´æˆ‘ä»¬æ— æ³•å®Œæˆæ•´ä¸ªäº¤æ˜“æµç¨‹ï¼Œè™½ç„¶ç”¨æˆ·è¿˜æ²¡ä»˜é’±ï¼Œä½†æ˜¯æˆ‘ä»¬çš„åº“å­˜å˜å°‘äº†ï¼ˆå•†å®¶è‚¯å®šå°±ä¸é«˜å…´äº†ğŸ‘¿ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°äº‹åŠ¡å›æ»šæ¥è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚
Spring Boot äº‹åŠ¡å›æ»šæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°äº‹åŠ¡å›æ»šï¼Œç¬¬ä¸€ç§æ˜¯è‡ªåŠ¨å›æ»šï¼Œç¬¬äºŒç§æ˜¯æ‰‹åŠ¨å›æ»šï¼Œè¿™ä¸¤ç§å®ç°æ–¹å¼å¤§åŒå°å¼‚ï¼ŒäºŒè€…éƒ½éœ€è¦ä½¿ç”¨ @Transactional æ³¨è§£æ¥å®ç°äº‹åŠ¡å›æ»šï¼Œä¸‹é¢ç›´æ¥ä¸Šä»£ç ï¼Œçœ‹çœ‹äºŒè€…ä¹‹é—´åˆ°åº•å“ªé‡Œä¸ä¸€æ ·ã€‚
åœ¨æ¥å£å®ç°ç±»ä¸­æœ‰ä¸€ä¸ªæ’å…¥ä¼šå‘˜ä¿¡æ¯çš„æ–¹æ³•ï¼Œå’±ä»¬å°±å¯¹è¿™ä¸ª.."><script src="//unpkg.com/valine/dist/Valine.min.js"></script><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Hexo & github" type="application/atom+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Haojen's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Spring Bootäº‹åŠ¡å›æ»š</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">ç‚¹å‡»è¿”å›é¡¶éƒ¨</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">é¦–é¡µ</a></h3><h3 class="is-inline-block"><a href="/about">å…³äº</a></h3><h3 class="is-inline-block"><a href="/archives">å½’æ¡£</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Boot-%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A"><span class="toc-text">Spring Boot äº‹åŠ¡å›æ»š</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%9B%9E%E6%BB%9A"><span class="toc-text">è‡ªåŠ¨å›æ»š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%9B%9E%E6%BB%9A"><span class="toc-text">æ‰‹åŠ¨å›æ»š</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-Boot-%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">Spring Boot äº‹åŠ¡å›æ»šæ³¨æ„äº‹é¡¹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-text">å°ç»“</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/%E5%AE%89%E5%85%A8%E6%80%A7"><i class="tag post-item-tag">å®‰å…¨æ€§</i></a><a href="/tags/%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A"><i class="tag post-item-tag">äº‹åŠ¡å›æ»š</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Spring Bootäº‹åŠ¡å›æ»š</h1><time class="has-text-grey" datetime="2022-12-03T12:27:01.326Z">2022-12-03</time><article class="mt-2 post-content"><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æˆ‘ä»¬å¼€å‘ç³»ç»Ÿçš„æ—¶å€™ç»å¸¸ä¼šé‡åˆ°ä¸€äº›å…³äºäº¤æ˜“çš„éœ€æ±‚ï¼Œäº¤æ˜“çš„è¿‡ç¨‹å¤§å¤šæ•°éƒ½æ¯”è¾ƒç¹çï¼ˆä¼šåŒ…æ‹¬ä¿®æ”¹åº“å­˜ã€ä¿®æ”¹ä½™é¢ã€è®°å½•äº¤æ˜“è´¦å•ç­‰ç­‰æ­¥éª¤ï¼‰ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±ä¸å¾—ä¸è€ƒè™‘å…¶ä¸­çš„æ½œåœ¨é£é™©äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨äº¤æ˜“çš„è¿‡ç¨‹ä¸­ä¿®æ”¹äº†åº“å­˜ï¼ˆåº“å­˜ -1ï¼‰ï¼Œæ¥ä¸‹æ¥éœ€è¦è¿›è¡Œæ”¯ä»˜æ“ä½œï¼Œä½†æ˜¯æ­¤æ—¶ç³»ç»Ÿçªç„¶å®•æœºæˆ–è€…ç½‘ç»œçªç„¶ä¸­æ–­ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´æˆ‘ä»¬æ— æ³•å®Œæˆæ•´ä¸ªäº¤æ˜“æµç¨‹ï¼Œè™½ç„¶ç”¨æˆ·è¿˜æ²¡ä»˜é’±ï¼Œä½†æ˜¯æˆ‘ä»¬çš„åº“å­˜å˜å°‘äº†ï¼ˆå•†å®¶è‚¯å®šå°±ä¸é«˜å…´äº†ğŸ‘¿ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°äº‹åŠ¡å›æ»šæ¥è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚</p>
<h1 id="Spring-Boot-äº‹åŠ¡å›æ»š"><a href="#Spring-Boot-äº‹åŠ¡å›æ»š" class="headerlink" title="Spring Boot äº‹åŠ¡å›æ»š"></a>Spring Boot äº‹åŠ¡å›æ»š</h1><p>æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°äº‹åŠ¡å›æ»šï¼Œç¬¬ä¸€ç§æ˜¯è‡ªåŠ¨å›æ»šï¼Œç¬¬äºŒç§æ˜¯æ‰‹åŠ¨å›æ»šï¼Œè¿™ä¸¤ç§å®ç°æ–¹å¼å¤§åŒå°å¼‚ï¼ŒäºŒè€…éƒ½éœ€è¦ä½¿ç”¨ @Transactional æ³¨è§£æ¥å®ç°äº‹åŠ¡å›æ»šï¼Œä¸‹é¢ç›´æ¥ä¸Šä»£ç ï¼Œçœ‹çœ‹äºŒè€…ä¹‹é—´åˆ°åº•å“ªé‡Œä¸ä¸€æ ·ã€‚</p>
<p>åœ¨æ¥å£å®ç°ç±»ä¸­æœ‰ä¸€ä¸ªæ’å…¥ä¼šå‘˜ä¿¡æ¯çš„æ–¹æ³•ï¼Œå’±ä»¬å°±å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œæ”¹é€ ï¼Œåˆ†åˆ«å®ç°ä¸€ä¸‹è‡ªåŠ¨å›æ»šå’Œæ‰‹åŠ¨å›æ»šğŸ‘‡</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cashierMember ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertCashierMember</span><span class="params">(CashierMember cashierMember)</span></span><br><span class="line">{</span><br><span class="line">    cashierMember.setCreateTime(DateUtils.getNowDate());</span><br><span class="line">    cashierMember.setCreateBy(ShiroUtils.getLoginName());</span><br><span class="line">    SMSUtil.sendCreateMemberMessage(cashierMember.getPhonenumber());</span><br><span class="line">    <span class="keyword">return</span> cashierMemberMapper.insertCashierMember(cashierMember);</span><br><span class="line">}</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></tbody></table></figure>

<h2 id="è‡ªåŠ¨å›æ»š"><a href="#è‡ªåŠ¨å›æ»š" class="headerlink" title="è‡ªåŠ¨å›æ»š"></a>è‡ªåŠ¨å›æ»š</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cashierMember ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertCashierMember</span><span class="params">(CashierMember cashierMember)</span></span><br><span class="line">{</span><br><span class="line">    cashierMember.setCreateTime(DateUtils.getNowDate());</span><br><span class="line">    cashierMember.setCreateBy(ShiroUtils.getLoginName());</span><br><span class="line">    SMSUtil.sendCreateMemberMessage(cashierMember.getPhonenumber());</span><br><span class="line">    <span class="keyword">return</span> cashierMemberMapper.insertCashierMember(cashierMember);</span><br><span class="line">}</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ–¹æ³•ä¸Šå¢åŠ äº†ä¸€ä¸ªæ³¨è§£ @Transactional(rollbackFor = Exception.class) ï¼Œé€šè¿‡è¯¥æ³¨è§£å¯ä»¥å¯¹å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œå½“å‘ç”Ÿå¼‚å¸¸æ—¶å°±å¯ä»¥è¿›è¡Œå›æ»šï¼Œä»è€Œæ’¤é”€æœ¬æ¬¡çš„å…¥åº“æ“ä½œã€‚</p>
<p>å¾ˆå¤šæ–¹æ³•ä¸­éƒ½ä¼šç”¨ try-catch å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ­¤æ—¶åœ¨ catch ä¸­å¯¹å¯èƒ½å‡ºç°çš„å¼‚å¸¸è¿›è¡Œäº†å¤„ç†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å†æ‰‹åŠ¨æŠ›å‡ºï¼ˆthrowï¼‰å¼‚å¸¸ï¼ŒSpring åˆ™ä¼šè®¤ä¸ºè¯¥æ–¹æ³•æˆåŠŸæ‰§è¡Œï¼Œä¹Ÿå°±ä¸ä¼šè¿›è¡Œå›æ»šğŸ‘‡ã€‚ <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4b9858bcb9f4d22a5cc2931883efe1e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"> æ­£è§£å¦‚ä¸‹ğŸ‘‡ï¼š</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cashierMember ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertCashierMember</span><span class="params">(CashierMember cashierMember)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        cashierMember.setCreateTime(DateUtils.getNowDate());</span><br><span class="line">        cashierMember.setCreateBy(ShiroUtils.getLoginName());</span><br><span class="line">        SMSUtil.sendCreateMemberMessage(cashierMember.getPhonenumber());</span><br><span class="line">        <span class="keyword">return</span> cashierMemberMapper.insertCashierMember(cashierMember);</span><br><span class="line">    }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">        System.out.println(<span class="string">"æ–¹æ³•å‡ºç°å¼‚å¸¸ï¼š"</span> + e);</span><br><span class="line">        <span class="comment">//æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></tbody></table></figure>

<p>P.S. å¦‚æœ try-catch è¯­å¥åœ¨ finally è¯­å¥å—ä¸­è¿›è¡Œäº† return æ“ä½œï¼Œé‚£ä¹ˆ catch è¯­å¥å—ä¸­æ‰‹åŠ¨æŠ›å‡ºçš„å¼‚å¸¸ä¹Ÿä¼šè¢«è¦†ç›–ï¼ŒåŒæ ·ä¸ä¼šè‡ªåŠ¨å›æ»šã€‚</p>
<h2 id="æ‰‹åŠ¨å›æ»š"><a href="#æ‰‹åŠ¨å›æ»š" class="headerlink" title="æ‰‹åŠ¨å›æ»š"></a>æ‰‹åŠ¨å›æ»š</h2><p>æ‰‹åŠ¨å›æ»šçš„å®ç°æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼Œåªéœ€è¦æ·»åŠ ä¸€å¥ä»£ç å³å¯å®ç°ğŸ‘‡</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ’å…¥ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cashierMember ä¼šå‘˜ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insertCashierMember</span><span class="params">(CashierMember cashierMember)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        cashierMember.setCreateTime(DateUtils.getNowDate());</span><br><span class="line">        cashierMember.setCreateBy(ShiroUtils.getLoginName());</span><br><span class="line">        SMSUtil.sendCreateMemberMessage(cashierMember.getPhonenumber());</span><br><span class="line">        <span class="keyword">return</span> cashierMemberMapper.insertCashierMember(cashierMember);</span><br><span class="line">    }<span class="keyword">catch</span> (Exception e){</span><br><span class="line">        System.out.println(<span class="string">"æ–¹æ³•å‡ºç°å¼‚å¸¸ï¼š"</span> + e);</span><br><span class="line">        <span class="comment">//å®ç°æ‰‹åŠ¨å›æ»š</span></span><br><span class="line">        TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></tbody></table></figure>

<p>P.S. è¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œæ‰‹åŠ¨å›æ»šè¯­å¥ä¸ä¸€å®šè¦æ·»åŠ åœ¨ catch ä»£ç å—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨æ‰‹åŠ¨å›æ»šè¯­å¥ã€‚<strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è™½ç„¶å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å¢åŠ æ‰‹åŠ¨å›æ»šè¯­å¥ï¼Œä½†æ˜¯æ‰‹åŠ¨å›æ»šè¯­å¥åçš„ä»£ç è¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Œæ‰€ä»¥ä¸å»ºè®®åœ¨é catch ä»£ç å—ä¸­ä½¿ç”¨æ‰‹åŠ¨å›æ»šè¯­å¥ã€‚</strong> å¦‚æœéè¦è¿™ä¹ˆç”¨çš„è¯ï¼Œå°±ä¸€å®šè¦å¥½å¥½æ–Ÿé…Œä¸€ä¸‹è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘æ˜¯ä¸æ˜¯ä¼šæœ‰ BUG äº†ã€‚</p>
<h1 id="Spring-Boot-äº‹åŠ¡å›æ»šæ³¨æ„äº‹é¡¹"><a href="#Spring-Boot-äº‹åŠ¡å›æ»šæ³¨æ„äº‹é¡¹" class="headerlink" title="Spring Boot äº‹åŠ¡å›æ»šæ³¨æ„äº‹é¡¹"></a>Spring Boot äº‹åŠ¡å›æ»šæ³¨æ„äº‹é¡¹</h1><p>è¿™é‡Œæˆ‘ä»¬å†ç®€å•è¯´å‡ å¥å…³äº Spring Boot äº‹åŠ¡å›æ»šä¸­çš„æ³¨æ„äº‹é¡¹ï¼š</p>
<ol>
<li>æƒ³å®ç°å›æ»šï¼Œé¦–å…ˆè¦ä¿è¯ Spring Boot å¼€å¯äº†äº‹åŠ¡ï¼ˆåœ¨å¯åŠ¨ç±»ä¸Šå¢åŠ  @EnableTransactionManagement æ³¨è§£å¼€å¯äº‹åŠ¡ï¼ˆå…¶å® Spring Boot é»˜è®¤å°±æ˜¯å¼€å¯äº‹åŠ¡çš„ï¼‰ï¼Œå…¶æ¬¡å°±æ˜¯å®ç°å›æ»šçš„æ–¹æ³•å¿…é¡»æ˜¯ public çš„ã€‚</li>
<li>@Transactional(rollbackFor=Exception.class) è¡¨ç¤ºçš„æ˜¯è¯¥æ–¹æ³•æ— è®ºæŠ›å‡ºä»€ä¹ˆå¼‚å¸¸éƒ½ä¼šè¿›è¡Œè‡ªåŠ¨å›æ»šï¼›å¦‚æœä¸åŠ  (rollbackFor=Exception.class) çš„è¯ï¼Œåˆ™ä»£è¡¨äº†é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯åªæœ‰å½“è¯¥æ–¹æ³•æŠ›å‡ºäº†éæ£€æŸ¥å‹å¼‚å¸¸ï¼ˆRuntimeExceptionï¼‰æ—¶æ‰ä¼šè¿›è¡Œå›æ»šã€‚</li>
<li>ç”±äºäº‹åŠ¡çš„å››å¤§ç‰¹æ€§ï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼‰ï¼Œæ‰€ä»¥ @Transactional ä¸€èˆ¬æ˜¯è¦åŠ åœ¨ä¸šåŠ¡å±‚ï¼ˆä¹Ÿå°±æ˜¯æ¥å£å®ç°ç±»ï¼‰ä¸­ã€‚</li>
<li>å¦‚æœå°† @Transactional(rollbackFor=Exception.class) åŠ åœ¨äº†æ¥å£å®ç°ç±»ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¸‹çš„æ‰€æœ‰æ–¹æ³•éƒ½å°†ä¼šè¢«åŠ ä¸Šäº‹åŠ¡ç®¡ç†ï¼Œå³æ‰€æœ‰æ–¹æ³•éƒ½ä¼šåœ¨è‡ªå·±å‡ºç°å¼‚å¸¸æ—¶è¿›è¡Œå›æ»šæ“ä½œã€‚</li>
</ol>
<h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æœ¬äººç»éªŒæœ‰é™ï¼Œæœ‰äº›åœ°æ–¹å¯èƒ½è®²çš„æ²¡æœ‰ç‰¹åˆ«åˆ°ä½ï¼Œå¦‚æœæ‚¨åœ¨é˜…è¯»çš„æ—¶å€™æƒ³åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä»¬åç»­å†ä¸€ä¸€æ¢è®¨ğŸ™‡â€</p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2022/12/12/elasticsearch/%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5/" title="æ•°æ®åŒæ­¥"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">ä¸Šä¸€é¡µ: æ•°æ®åŒæ­¥</span></a><a class="button is-default" href="/2022/12/01/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/MinIO/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8docker%E5%AE%89%E8%A3%85MinIO/" title="äº‘æœåŠ¡å™¨dockerå®‰è£…MinIO"><span class="has-text-weight-semibold">ä¸‹ä¸€é¡µ: äº‘æœåŠ¡å™¨dockerå®‰è£…MinIO</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Haojen/RunningYu" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article><article class="mt-6 comment-container" id="vcomments"></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><a title="twitter" target="_blank" rel="noopener nofollow" href="//twitter.com//"><i class="iconfont icon-twitter"></i></a><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/haojen"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- çŸ¥ä¹--><!-- é¢†è‹±--><!-- è„¸ä¹¦--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright Â©</span><span> Haojen 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script></body></html>